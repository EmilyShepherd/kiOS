type="make"
depends="lib/libseccomp bin/conmon"
includedir=src

pre_build() {
  export CC_FOR_BUILD=$(which gcc)

  export LDFLAGS="-static ${LDFLAGS}"

  configure_flags="--enable-static --disable-doc"
  make_target="-C src"

  (cd ../libgpg-error && build_configure)
  (cd ../libassuan && libs="gpg-error" build_configure)
  (cd ../gpgme && libs="libassuan" build_configure)

  export CGO_LDFLAGS="$(pkg-config --static --libs gpgme)"
  export LDFLAGS="$LDFLAGS $CGO_LDFLAGS"
  export CGO_CFLAGS="$(pkg-config --cflags-only-I gpgme)"

  make_target="bin/crio bin/pinns"
}
